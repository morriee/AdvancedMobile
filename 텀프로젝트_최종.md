Papaya Diary
================================================

contents
-----------
+ 소개
+ 어플 기능
+ UI

* * *

## Papaya Diary
    오늘 한 일을 sns에 일기처럼 작성하고 싶지만 sns에 가입하기 부담스러운 분들을 위해 나만 볼 수 있는 피드를 만들자 는 생각에서 시작하였습니다. 
    그리고 메모, 캘린더, 날씨 처럼 평상시 자주 쓰는 기능들을 다이어리에 추가하였습니다.

* * *
## 팀원 소개 및 역할 분담

- 역할분담

|name|역할 분담|
|------|---|
|신수정|캘린더, 맵, 다이어리|
|김혜빈|메인(날짜, 요일, 시간, 날씨, 온도, 대기상황(미세먼지 등), 피드, 메모|
|김선우|비밀번호, 데이터베이스, Ui 꾸미기.|


 
- 만든 과정

|단계|내용|
|------|---|
|1단계|맨 처음 ui를 구성, 안드로이드 버전 맞춤.|
|2단계|api 파싱, firebase db와 연결, 로그인,회원가입 xml을 만듬. 게시물화면, 캘린더 api파싱 성공함|
|3단계|날씨 api 성공, 다이어리 xml 만듬|
|4단계|구글 맵 파싱성공. 메모장 완성.|
|5단계|피드완성, 캘린더 구글에서 제공하는 오픈 api사용.|
|6단계|UI, 앱 아이콘 디자인하여 어플 완성|



* * *

## 어플 기능
### 1. 날씨 & 미세먼지
  현재 날짜의 날씨와 미세먼지를 볼 수 있습니다.

           Calendar cal = Calendar.getInstance(); //날짜-요일-시간은 calendar을 이용해서 날짜를 불러옴

            String path = "https://weather.naver.com/rgn/townWetr.nhn?naverRgnCd=09290555"; //날씨 이미지와 현재기온, 미세먼지와 오존 농도는 네이버 날씨에서 불러옴
         
         mHandler = new Handler() {   //3) 스레드와 핸들러를 통한 실시간 시간/날씨 출력
         //..
         };
         class NewRunnable implements Runnable {
         // ..
        NewRunnable nr = new NewRunnable() ;
        Thread t = new Thread(nr) ;
        t.start() ;
        }
         
### 2. 일기장
  암호 사용을 설정할 수 있어 자신만이 볼 수 있는 비밀일기장 입니다.
         
         다이어리의 암호설정..DiaryDBHelper.java
         public class DiaryDBHelper extends SQLiteOpenHelper {


          public DiaryDBHelper(Context context) {
              super(context, "Diary", null, 1);
          }

          @Override
          public void onCreate(SQLiteDatabase db) {         //sqldb를 사용
              String sql = "CREATE TABLE diary (" +
                      "'code' INTEGER PRIMARY KEY AUTOINCREMENT," +
                      "`title` TEXT," +
                      "`date` TEXT," +
                      "`contents` TEXT);";
              db.execSQL(sql);

          }

          @Override
          public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
              String sql = "drop table if exists diary";
              db.execSQL(sql);

              onCreate(db);
          }
      }
      
      비밀번호를 입력해서 저장된 일기들의 내용을 불러올 수 있다. ... DiaryPassDBHelper.java.
      
         
### 3. 메모
  제목과 내용을 입력할 수 있는 메모장입니다.
  
      1) realm을 이용한 데이터 저장/삭제
       private Realm realm;
      
	2) adapter을 이용한 recyclerView에 저장된 메모 출력
      
	3) 툴바 버튼을 누르면 intent로 작성액티비티로 넘어가서 메모내용 작성후 저장버튼으로 다시 돌아옴
      
      case R.id.toolbar_button: {
                Intent addActivity = new Intent(MemoMain.this,AddActivity.class);
                startActivityForResult(addActivity,1);

            }
            
            
	4) 메모를 길게 누르면 삭제


           
      
### 4. 피드
  오늘 일과를 사진과 글로 기록하고 장소를 태그하는 앨범입니다.
            
          1)인텐트를 활용한 화면 전환  
            Intent addActivity = new Intent(MemoMain.this,AddActivity.class);
                startActivityForResult(addActivity,1);
                
	    2)SQLite를 이용한 데이터베이스로 만든 Feed저장/수정/삭제
             private class DatabaseHelper extends SQLiteOpenHelper {
             //
            String CREATE_SQL = "create table " + TABLE_MEMO + "("
                    + "  _id INTEGER  NOT NULL PRIMARY KEY AUTOINCREMENT, "
                    + "  INPUT_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, "
                    + "  CONTENT_TEXT TEXT DEFAULT '', "
                    + "  ID_PHOTO INTEGER, "
                    + "  GPS_TEXT TEXT DEFAULT '', "
                    + "  CREATE_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP "
                    + ")";
            try {
                db.execSQL(CREATE_SQL);
            } catch(Exception ex) {
                Log.e(TAG, "Exception in CREATE_SQL", ex);
             }
           }

	      3)카메라 권한을 활용한 사진 촬영
                <uses-permission android:name="android.permission.CAMERA" />
                  
	      4)Geocorder을 이용한 현재 좌표 출력과 주소 출력
            import android.location.Geocoder;
            
	      5)adapter를 이용한 recyclerView에 저장된 feed 출력
            
            
### 5. 달력
  달력을 보여줍니다.
  
           materialCalendarView 를 사용함. 구글의 오픈 api.
           
           //PapayaCalendar.java...
                   materialCalendarView.setOnDateChangedListener(new OnDateSelectedListener() {
                  @Override
                  public void onDateSelected(@NonNull MaterialCalendarView widget, @NonNull CalendarDay date, boolean selected) {
                      int Year = date.getYear();
                      int Month = date.getMonth() + 1;
                      int Day = date.getDay();

                      Log.i("Year test", Year + "");
                      Log.i("Month test", Month + "");
                      Log.i("Day test", Day + "");

                      String shot_Day = Year + "년" + Month + "월" + Day + "일"; // 날짜를 누르면 뜨는 토스트 내용

                      Log.i("shot_Day test", shot_Day + "");
                      materialCalendarView.clearSelection();

                      Toast.makeText(getApplicationContext(), shot_Day , Toast.LENGTH_SHORT).show();
                  }
              });
              
              //PapayaCalendar.java..
              //달력의 시작과 끝을 정해주는 소스.
              materialCalendarView.state().edit()
                      .setFirstDayOfWeek(Calendar.SUNDAY)
                      .setMinimumDate(CalendarDay.from(2017, 0, 1)) // 달력의 시작
                      .setMaximumDate(CalendarDay.from(2050, 12, 31)) // 달력의 끝
                      .setCalendarDisplayMode(CalendarMode.MONTHS)
                      .commit();
### 6. 지도
  피드 게시물에서 현재 위치를 받아 -> 위치text click -> 태그된 장소를 보여줍니다.
  
               //skt 티맵을 사용하였습니다.
                 TMapActivity.java
               //skt map 여기서부터
              setContentView(R.layout.activity_tmap);
              LinearLayout linearLayoutT_map = (LinearLayout)findViewById(R.id.linearLayoutT_map);
              final TMapView tMapView = new TMapView(this);
              tMapView.setSKTMapApiKey("/*api키*/");
              linearLayoutT_map.addView(tMapView);
              //여까지
            
              //마커 좌표지정
              Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.poi_dot);
               //여기서 그때그때 좌표를 받아와서 그 맵을 보여줌
              final TMapPoint tMapPoint = new TMapPoint(latitude, longitude);
              final TMapMarkerItem markerItem1 = new TMapMarkerItem();
              markerItem1.setIcon(bitmap); // 마커 아이콘 지정
              markerItem1.setPosition(0.5f, 1.0f); // 마커의 중심점을 중앙, 하단으로 설정
              markerItem1.setTMapPoint(tMapPoint); // 마커의 좌표 지정
              tMapView.addMarkerItem("markerItem1", markerItem1); // 지도에 마커 추가
              tMapView.setCenterPoint(longitude,latitude);
              
              
              //게시물에 업로드한 사진을 찍을때 좌표를 받아와 텍스트(주소로 변경)로 보이게하고 그 텍스트(주소)를
              // 클릭하면 맵이 보이게 되는 형태.
              MemoViewActivity.java
              
                      mMemoGps.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // 3번째 파라미터 생략 == 지도 이동 Animation 사용안함

                String[] s = mGpsStr.split(",");
                double longitude = Double.parseDouble(s[1]);
                double latitude = Double.parseDouble(s[0]);
                
                Intent intent = new Intent(MemoViewActivity.this, TMapActivity.class);
                intent.putExtra("mGpsStr",mGpsStr);
                startActivityForResult(intent,1);
                // tMapView.setCenterPoint(longitude,latitude);
                //tMapView.setCenterPoint(127.0100943,37.5826508);
                //tMapView.setCenterPoint(126.988205, 37.551135);

            }
        });
       
* * *
## UI
[![youtube](https://user-images.githubusercontent.com/42960479/70692404-a264b000-1cfe-11ea-9215-f7f3c9932489.png)](https://youtu.be/UzJhLMoavx4)

